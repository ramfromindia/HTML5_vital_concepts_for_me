<!DOCTYPE html>
<!-- no-js class allows CSS fallback if JavaScript fails -->
<html lang="en" class="no-js">
<head>
  <meta charset="UTF-8" />

  <!-- Responsive layout -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Prevent referrer leakage to third-party APIs -->
  <meta name="referrer" content="strict-origin-when-cross-origin" />

  <!-- Basic clickjacking protection -->
  <meta http-equiv="X-Frame-Options" content="DENY" />

  <!-- Minimal Content Security Policy
       Blocks inline scripts and limits network access -->
  <meta http-equiv="Content-Security-Policy"
        content="
          default-src 'self';
          style-src 'self';
          script-src 'self';
          connect-src https://api.adviceslip.com;
          img-src 'self';
        " />

  <title>Optimized Mini Notes</title>

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="browser_built-in_features_for_better_code.css" />
</head>

<body>

<!-- Skip link for keyboard / screen reader users -->
<a href="#main" class="skip-link">
  Skip to main content
</a>

<header role="banner">
  <h1>My Notes</h1>

  <!-- aria-expanded updated by JS when toggling theme -->
  <button
    id="themeToggle"
    type="button"
    aria-label="Toggle color theme"
    aria-controls="main"
    aria-expanded="false"
  >
    ðŸŒ™
  </button>
</header>

<!-- Explicit main landmark -->
<main id="main" role="main">

  <!-- New note input -->
  <section class="card observe" aria-labelledby="create-note">

    <form id="noteForm" novalidate>
      <!-- novalidate prevents browser popups so you control UX -->

      <label id="create-note" for="noteInput" class="form-label">
        Create a New Note
      </label>

      <!--
        aria-describedby connects helper text
        autocomplete helps assistive tech
        maxlength limits abuse payload size
      -->
      <input
        type="text"
        id="noteInput"
        placeholder="Type your thoughts here..."
        required
        minlength="3"
        maxlength="100"
        autocomplete="off"
        inputmode="text"
        aria-describedby="noteHelp"
      />

      <small id="noteHelp">
        Minimum 3 characters. Maximum 100.
      </small>

      <button type="submit" class="btn-primary">
        Add Note
      </button>
    </form>
  </section>

  <!-- Saved notes -->
  <section class="card observe" aria-labelledby="saved-notes">

    <div class="card-header">
      <h2 id="saved-notes">Saved Notes</h2>

      <!-- aria-pressed communicates destructive confirmation state -->
      <button
        id="clearAllBtn"
        type="button"
        class="btn-danger"
        aria-pressed="false"
        aria-label="Clear all notes"
      >
        Clear All
      </button>
    </div>

    <!-- Explicit list role for screen readers -->
    <ul id="notesList" role="list"></ul>
  </section>

  <!-- Async advice -->
  <section class="card observe" aria-labelledby="daily-advice">
    <h2 id="daily-advice">Daily Advice</h2>

    <!-- role=status announces async updates politely -->
    <p id="adviceDisplay" role="status" aria-live="polite">
      Gathering wisdom...
    </p>
  </section>

</main>

<!--
Template is inert HTML.
Prevents XSS because JS assigns textContent (not innerHTML)
-->
<template id="noteTemplate">
  <li class="note-item" role="listitem">
    <span class="note-text"></span>

    <!-- Clear accessible name for icon-only button -->
    <button
      class="delete-btn"
      type="button"
      title="Delete Note"
      aria-label="Delete this note"
    >
      &times;
    </button>
  </li>
</template>

<!-- External JS only (required for CSP safety) -->
<script src="browser_built-in_features_for_better_code.js" defer></script>

</body>
</html>